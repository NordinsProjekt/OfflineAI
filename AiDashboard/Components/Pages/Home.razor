@page "/"
@rendermode InteractiveServer
@using AiDashboard.Components.Pages.Components

<PageTitle>Dashboard</PageTitle>

<div class="oa-dashboard @(DashboardService.Collapsed ? "collapsed" : string.Empty)">
    <Sidebar />
    
    <ChatArea Messages="@messages"
              IsProcessing="@isProcessing"
              ComposerText="@composerText"
              MessagesContainerRef="@messagesContainer"
              OnComposerTextChanged="@OnComposerTextChanged"
              OnKeyDown="@HandleKeyDown"
              OnSendMessage="@SendMessage" />
</div>

@* Loading overlay for inbox reload *@
@if (DashboardService.IsLoadingInbox)
{
    <div class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>Processing Inbox Files</h2>
            <p>@DashboardService.LoadingMessage</p>
            <p class="loading-warning">Please wait, do not close or refresh the page...</p>
        </div>
    </div>
}