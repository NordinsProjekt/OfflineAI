@inject DashboardState Dashboard

<CollapsibleSection SectionKey="model" Title="Model">
    <div class="oa-field">
        <label>Current Model</label>
        <select class="oa-text" @bind="Dashboard.ModelService.CurrentModel" @bind:after="OnModelChanged">
            @foreach (var m in Dashboard.ModelService.AvailableModels)
            {
                <option>@m</option>
            }
        </select>
    </div>
    <div class="oa-note">Model switches automatically when selected.</div>
</CollapsibleSection>

@code {
    private async Task OnModelChanged()
    {
        await Dashboard.SwitchModelAsync();
    }
}
