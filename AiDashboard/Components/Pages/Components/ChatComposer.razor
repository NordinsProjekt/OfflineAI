<div class="oa-composer">
    <div class="oa-composer-form">
        <div class="oa-composer-input-wrapper">
            <textarea class="oa-composer-input" 
                      rows="2" 
                      placeholder="Type your message..."
                      value="@ComposerText"
                      @oninput="@(e => OnComposerTextChanged.InvokeAsync(e.Value?.ToString() ?? string.Empty))"
                      @onkeydown="@OnKeyDown" 
                      disabled="@IsProcessing"></textarea>
        </div>
        <button class="oa-send-btn" 
                type="button" 
                title="Send message" 
                aria-label="Send message" 
                @onclick="@OnSendMessage" 
                disabled="@IsProcessing">
            @(IsProcessing ? "Sending..." : "Send")
        </button>
    </div>
</div>

@code {
    [Parameter]
    public string ComposerText { get; set; } = string.Empty;

    [Parameter]
    public bool IsProcessing { get; set; }

    [Parameter]
    public EventCallback<string> OnComposerTextChanged { get; set; }

    [Parameter]
    public EventCallback<KeyboardEventArgs> OnKeyDown { get; set; }

    [Parameter]
    public EventCallback OnSendMessage { get; set; }
}
